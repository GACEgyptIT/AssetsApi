<div class="main-content">
    <ngx-alerts></ngx-alerts>
    <ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '3px' }" ></ngx-loading>
      <div class="container-fluid" >

            <div class="row card col-md-12"  >
                <a routerLink="/operation/invoicemng" routerLinkActive="active" class="pull-left">Back to Invoices Management</a> 
                <div class="content">
                  <div class="row card col-md-12" style="background-color:  #f9f9f9;" >
                    <br>
                    <div class="col-md-6">
                      <div class=" row ">
                        <form novalidate [formGroup]="filterByMonthForm"> 
                          
                        <div class="col-md-2">

                              <select formControlName="ItemCategoryName1"    [ngStyle]="{'background-color': filterByMonthForm.controls.ItemCategoryName1.value ? 'gray' : 'white'}"
                              (change)="onFilterChange(filterByMonthForm.value, 'forMonths')" 
                              class="form-control" data-title="Single Select" placeholder="Categories"
                              data-style="btn-default btn-block" data-menu-style="dropdown-blue">
                              <option value="" >Cat - 1</option>
                              <option *ngFor="let a of ItemsCategorys" value={{a.icName}} > {{a.icName}} </option>
                              </select>
                        </div>
                        <div class="col-md-2">

                              <select formControlName="ItemCategoryName2"   [ngStyle]="{'background-color': filterByMonthForm.controls.ItemCategoryName2.value ? 'gray' : 'white'}"
                               (change)="onFilterChange(filterByMonthForm.value, 'forMonths')" 
                              class="form-control" data-title="Single Select" placeholder="Categories"
                              data-style="btn-default btn-block" data-menu-style="dropdown-blue">
                              <option value="" >Cat - 2</option>
                              <option *ngFor="let a of ItemsCategorys" value={{a.icName}} > {{a.icName}} </option>
                              </select>

                        </div>
                        <div class="col-md-2">

                              <select formControlName="ItemCategoryName3"  [ngStyle]="{'background-color': filterByMonthForm.controls.ItemCategoryName3.value ? 'gray' : 'white'}"
                               (change)="onFilterChange(filterByMonthForm.value, 'forMonths')" 
                              class="form-control" data-title="Single Select" placeholder="Categories"
                              data-style="btn-default btn-block" data-menu-style="dropdown-blue">
                              <option value="" >Cat - 3</option>
                              <option *ngFor="let a of ItemsCategorys" value={{a.icName}} > {{a.icName}} </option>
                              </select>
                        </div>
                        <div class="col-md-2">
                          <select formControlName="ItemCategoryName4"   [ngStyle]="{'background-color': filterByMonthForm.controls.ItemCategoryName4.value ? 'gray' : 'white'}"
                          (change)="onFilterChange(filterByMonthForm.value, 'forMonths' )" 
                          class="form-control" data-title="Single Select" placeholder="Categories"
                          data-style="btn-default btn-block" data-menu-style="dropdown-blue">
                          <option value="" >Cat - 4</option>
                          <option *ngFor="let a of ItemsCategorys" value={{a.icName}} > {{a.icName}} </option>
                          </select>
                    </div>
                        <div>
                          <i class="pe-7s-refresh-2 toolbarIcon" (click)="onGetAllInvoices(filterByMonthForm, 'forMonths')" ></i>
                        </div>
                      </form>
                      </div>
                      <div class="row ">
                          <br>
                          <lbd-chartMonth
                          [title]="'Monthly Purchasing'"
                          [subtitle]="'All invoices including Taxes'"
                          [chartTypeMonth]="activityChartTypeMonth"
                          [chartDataForMonths]="activityChartDataForMonths"
                          [chartOptions]="activityChartOptions"
                          [chartResponsive]="activityChartResponsive"
                          [legendItemsMonths]="activityChartLegendItemsMonth"
                          [withHr]="true"
                          [footerIconClass]="'fa fa-check'"
                          [footerText]="'Data information certified'">
                          </lbd-chartMonth>

                      </div>

                    </div>
                    <div class="col-md-6">
                      <div class="row ">
                        <form novalidate [formGroup]="filterByBranchForm"> 
                        <div class="col-md-2">
                          <select formControlName="ItemCategoryName1"  [ngStyle]="{'background-color': filterByBranchForm.controls.ItemCategoryName1.value ? 'gray' : 'white'}"
                            (change)="onFilterChange(filterByBranchForm.value, 'forBranchs')" 
                          class="form-control" data-title="Single Select" placeholder="Categories"
                          data-style="btn-default btn-block" data-menu-style="dropdown-blue">
                          <option value="" >Category</option>
                          <option *ngFor="let a of ItemsCategorys" value={{a.icName}} > {{a.icName}} </option>
                        </select>
                        </div>
                        <div class="col-md-2">
                          <!-- <select formControlName="ItemCategoryName2"  [ngStyle]="{'background-color': filterByBranchForm.controls.ItemCategoryName2.value ? 'gray' : 'white'}"
                           (change)="onFilterChange(filterByBranchForm.value, 'forBranchs')" 
                          class="form-control" data-title="Single Select" placeholder="Categories"
                          data-style="btn-default btn-block" data-menu-style="dropdown-blue">
                          <option value="" >Cat - 2</option>
                          <option *ngFor="let a of ItemsCategorys" value={{a.icName}} > {{a.icName}} </option>
                        </select> -->

                        </div>
                        <div class="col-md-2">

                          <!-- <select formControlName="ItemCategoryName3"  [ngStyle]="{'background-color': filterByBranchForm.controls.ItemCategoryName3.value ? 'gray' : 'white'}"
                           (change)="onFilterChange(filterByBranchForm.value, 'forBranchs')" 
                          class="form-control" data-title="Single Select" placeholder="Categories"
                          data-style="btn-default btn-block" data-menu-style="dropdown-blue">
                          <option value="" >Cat - 3</option>
                          <option *ngFor="let a of ItemsCategorys" value={{a.icName}} > {{a.icName}} </option>
                        </select> -->
                        </div>
                        <div class="col-md-3">
                          <title>Filter Dates </title>
                            <input  
                            (bsValueChange)="onFilterInvoicesByDate($event, filterByBranchForm.value, 'forBranchs')"
                            type="text"
                            class="form-control"
                            #daterangepicker="bsDaterangepicker"
                            placeholder="Select Date Range"
                            bsDaterangepicker
                            [bsConfig]="{ rangeInputFormat : 'MMMM Do YYYY, h:mm:ss a', dateInputFormat: 'MMMM Do YYYY, h:mm:ss a', showWeekNumbers: false }">
                         
                        </div> 
                        <div>
                          <!-- <i class="pe-7s-refresh-2 toolbarIcon" (click)="onGetAllInvoices(filterByMonthForm, 'forMonths')" ></i> -->
                          From: {{FromDateString}}    <br>   To: {{ToDateString}} 
                        </div>

                        </form>
                      </div>      
                      <div class="row ">
                        <br>
                        <lbd-chartBranch
                        [title]="'Branchs Purchasing'"
                        [subtitle]="'All invoices including Taxes'"
                        [chartTypeBranch]="activityChartTypeBranch"
                        [chartDataForBranchs]="activityChartDataForBranchs"
                        [chartOptions]="activityChartOptions"
                        [chartResponsive]="activityChartResponsive"
                        [legendItemsBranchs]="activityChartLegendItemsBranchs"
                        [withHr]="true"
                        [footerIconClass]="'fa fa-check'"
                        [footerText]="'Data information certified'">
                      </lbd-chartBranch>
                                                   <!-- From:  {{dateFrom}} To:   {{dateTo}} -->
                      </div>
                    </div>             
                  </div>
                  <div class="row card col-md-12" style="background-color:  #f9f9f9;" >
                    <br>
                    <div class="col-md-6">
                      <div class=" row ">
                       <title> Monthly Table </title> 
                      </div>
                      <div class="row ">
                        <div id="print-section" >
                          <div class="fresh-datatables"  >
                            <table id="datatables" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">                     
                            <thead>
                                  <tr>
                                    <th style="color: green;">Categories</th>
                                    <th> Jan </th>
                                    <th> Feb </th>
                                    <th> March </th>
                                    <th> April </th>
                                    <th> May </th>
                                    <th> June </th>
                                    <th> July </th>
                                    <th> Aug </th>
                                    <th> Sep </th>
                                    <th> Oct </th>
                                    <th> Nov </th>
                                    <th> Dec </th>
                                    <th style="color: green;">Total</th>              
                                  </tr>
                            </thead>
                            <tbody>
                                  <tr *ngFor="let row of activityChartDataForMonths.series">
                                    <td style="color: green;">{{ row[12] }}</td>
                                    <td>{{ row[0] }}</td>
                                    <td>{{ row[1] }}</td>
                                    <td>{{ row[2] }}</td>
                                    <td>{{ row[3] }}</td>
                                    <td>{{ row[4] }}</td> 
                                    <td>{{ row[5] }}</td>
                                    <td>{{ row[6] }}</td>
                                    <td>{{ row[7] }}</td>
                                    <td>{{ row[8] }}</td>
                                    <td>{{ row[9] }}</td>
                                    <td>{{ row[10] }}</td>
                                    <td>{{ row[11] }}</td> 
                                    <td style="color: green;">{{ row[13] }}</td>                       
                                  </tr>                      
                            </tbody>
                            </table>
                          </div>
                         </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="row ">
                        <title>Branchs Table  </title> 
                      </div>
          
                      <div class="row ">
                        <div id="print-section" >
                          <div class="fresh-datatables"  >
                            <table id="datatables" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%"> 
                            <thead>
                                  <tr >
                                    <th style="color: green;">Cost Centers</th>
                                    <th> Amounts  </th>
                                    <th style="color: green;">Total</th>        
                                  </tr>
                            </thead>
                            <tbody>
                              <!-- *ngFor="let row of activityChartDataForBranchs?.labels; let i = index;" -->
                                  <tr >
                                    <td>{{ activityChartDataForBranchs?.labels }}</td>
                                    <td style="color: green;">{{ activityChartDataForBranchs.series }} </td>
                                    <td style="color: green;"> {{ totalByCC }}</td>                       
                                  </tr>
                            </tbody>
                            </table>
                          </div>
                         </div>
                      </div>
                    </div>
                  </div>
                </div>
            </div>
 
  
      </div>
  </div>